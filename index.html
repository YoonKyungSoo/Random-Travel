<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëœë¤ ì—¬í–‰ì§€ í”½! ğŸ—ºï¸âœˆï¸</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1>ğŸ—ºï¸ ëœë¤ ì—¬í–‰ì§€ í”½!</h1>
            <p>í•œêµ­ ì§€ë„ì—ì„œ ìš´ëª…ì˜ ì—¬í–‰ì§€ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!</p>
        </header>

        <div class="main-content">
            <!-- ì§€ë„ ì»¨í…Œì´ë„ˆ -->
            <div class="map-container">
                <div id="vmap" style="width:100%;height:370px;left:0px;top:0px"></div>
            </div>

            <!-- ê¸°ë³¸ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ë“¤ -->
            <div class="controls">
                <button id="randomPickBtn" class="btn primary">ğŸ¯ ëœë¤ ì—¬í–‰ì§€ í”½!</button>
                <button id="resetBtn" class="btn secondary">ğŸ”„ ë‹¤ì‹œí•˜ê¸°</button>
                <button id="favoriteBtn" class="btn accent hidden">â¤ï¸ ì¦ê²¨ì°¾ê¸°</button>
            </div>

            <!-- ê²½ë¡œ ê·¸ë¦¬ê¸° ì»¨íŠ¸ë¡¤ -->
            <div class="route-controls">
                <h3>ğŸ—ºï¸ ê²½ë¡œ ê·¸ë¦¬ê¸°</h3>
                <div class="route-buttons">
                    <button type="button" onclick="javascript:jsCreatRoute('test1');" class="btn small">RouteMap1ìƒì„±</button>
                    <button type="button" onclick="javascript:jsAddRouteEvent('test1');" class="btn small">ê²½ë¡œì¶”ê°€</button>
                    <button type="button" onclick="javascript:jsInit('test1');" class="btn small">ì…ë ¥ì™„ë£Œ</button>
                    <button type="button" onclick="javascript:setColor('test1');" class="btn small">ë¼ì¸ìƒ‰ìƒêµì²´</button>
                    <button type="button" onclick="javascript:setWidth('test1');" class="btn small">ë¼ì¸í¬ê¸°êµì²´</button>
                    <button type="button" onclick="javascript:closeAllPop('test1');" class="btn small">íŒì—…ì „ì²´ë‹«ê¸°</button>
                    <button type="button" onclick="javascript:openAllPop('test1');" class="btn small">íŒì—…ì „ì²´ì—´ê¸°</button>
                    <button type="button" onclick="javascript:jsRemoveRoute('test1');" class="btn small">RouteMap1ì‚­ì œ</button>
                </div>
                <div class="route-buttons">
                    <button type="button" onclick="javascript:jsCreatRoute('test2');" class="btn small">RouteMap2ìƒì„±</button>
                    <button type="button" onclick="javascript:jsAddRouteEvent('test2');" class="btn small">ê²½ë¡œì¶”ê°€</button>
                    <button type="button" onclick="javascript:jsInit('test2');" class="btn small">ì…ë ¥ì™„ë£Œ</button>
                    <button type="button" onclick="javascript:setColor('test2');" class="btn small">ë¼ì¸ìƒ‰ìƒêµì²´</button>
                    <button type="button" onclick="javascript:setWidth('test2');" class="btn small">ë¼ì¸í¬ê¸°êµì²´</button>
                    <button type="button" onclick="javascript:closeAllPop('test2');" class="btn small">íŒì—…ì „ì²´ë‹«ê¸°</button>
                    <button type="button" onclick="javascript:openAllPop('test2');" class="btn small">íŒì—…ì „ì²´ì—´ê¸°</button>
                    <button type="button" onclick="javascript:jsRemoveRoute('test2');" class="btn small">RouteMap2ì‚­ì œ</button>
                </div>
            </div>

            <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
            <div id="resultCard" class="result-card hidden">
                <h3>ğŸ‰ ì—¬í–‰ì§€ê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
                <div id="locationInfo">
                    <p id="locationName"></p>
                    <p id="locationDescription"></p>
                </div>
                <div class="action-buttons">
                    <button id="shareBtn" class="btn small">ğŸ“¤ ê³µìœ í•˜ê¸°</button>
                    <button id="saveBtn" class="btn small">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
                </div>
            </div>

            <!-- ì €ì¥ëœ ì •ë³´ í‘œì‹œ ì˜ì—­ -->
            <div id="savedInfo" class="saved-info hidden">
                <h3>ğŸ’¾ ì €ì¥ëœ ì •ë³´</h3>
                <div id="routeInfo" class="route-info">
                    <h4>ğŸ—ºï¸ ê²½ë¡œ ì„¤ì •</h4>
                    <div id="routeDetails"></div>
                </div>
                <div id="favoritesList" class="favorites-list">
                    <h4>â¤ï¸ ì¦ê²¨ì°¾ê¸°í•œ ì—¬í–‰ì§€</h4>
                    <div id="favoritesContainer"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ì¹´ì¹´ì˜¤ë§µ API ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c837a316c42b3e191934f21e1921839f" defer></script>
    
    <!-- ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ëŠ¥ -->
    <script>
        var map;
        var tempMarker = null;
        var routeMap1 = null;
        var routeMap2 = null;
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì§€ë„ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            // ì¹´ì¹´ì˜¤ë§µ API ë¡œë”© í™•ì¸ ë° ì´ˆê¸°í™”
            checkKakaoMapAPI();
        });
        
        // ì¹´ì¹´ì˜¤ë§µ API ë¡œë”© í™•ì¸
        function checkKakaoMapAPI() {
            if (typeof kakao !== 'undefined' && kakao.maps) {
                console.log('âœ… ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ì™„ë£Œ!');
                initializeMap();
            } else {
                console.log('ì¹´ì¹´ì˜¤ë§µ API ë¡œë”© ëŒ€ê¸° ì¤‘...');
                // 500msë§ˆë‹¤ ì¬ì‹œë„ (ìµœëŒ€ 10ì´ˆ)
                if (window.kakaoRetryCount === undefined) {
                    window.kakaoRetryCount = 0;
                }
                
                if (window.kakaoRetryCount < 20) { // 10ì´ˆ ëŒ€ê¸°
                    window.kakaoRetryCount++;
                    setTimeout(checkKakaoMapAPI, 500);
                } else {
                    console.error('ì¹´ì¹´ì˜¤ë§µ API ë¡œë“œ ì‹¤íŒ¨');
                    showMapError();
                }
            }
        }
        
        // ì§€ë„ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì˜¤ë¥˜ í‘œì‹œ
        function showMapError() {
            const mapContainer = document.getElementById('vmap');
            if (mapContainer) {
                mapContainer.innerHTML = `
                    <div style="
                        width: 100%; 
                        height: 100%; 
                        background: linear-gradient(135deg, #ff6b6b, #ee5a24);
                        display: flex; 
                        align-items: center; 
                        justify-content: center;
                        border-radius: 15px;
                        color: white;
                        font-size: 1.2rem;
                        text-align: center;
                        cursor: pointer;
                    " onclick="retryKakaoMap()">
                        <div>
                            <div style="font-size: 3rem; margin-bottom: 15px;">âš ï¸</div>
                            <div style="font-size: 1.4rem; font-weight: bold; margin-bottom: 10px;">ì§€ë„ ë¡œë“œ ì‹¤íŒ¨</div>
                            <div style="font-size: 1rem; margin-bottom: 20px; opacity: 0.9;">ì¹´ì¹´ì˜¤ë§µ API ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤</div>
                            <div style="
                                background: rgba(255,255,255,0.2);
                                padding: 10px 20px;
                                border-radius: 20px;
                                font-size: 0.9rem;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                border: 1px solid rgba(255,255,255,0.3);
                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                í´ë¦­í•˜ì—¬ ë‹¤ì‹œ ì‹œë„
                            </div>
                        </div>
                    </div>
                `;
            }
        }
        
        // ì¹´ì¹´ì˜¤ë§µ ì¬ì‹œë„
        function retryKakaoMap() {
            window.kakaoRetryCount = 0;
            checkKakaoMapAPI();
        }
        
        // ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™”
        function initializeMap() {
            try {
                var container = document.getElementById('vmap');
                var options = {
                    center: new kakao.maps.LatLng(36.5, 127.5), // í•œêµ­ ì¤‘ì‹¬
                    level: 7
                };

                map = new kakao.maps.Map(container, options);
                console.log('âœ… ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™” ì™„ë£Œ!');
                
                // ì§€ë„ í´ë¦­ ì´ë²¤íŠ¸ ì„¤ì •
                kakao.maps.event.addListener(map, 'click', function(mouseEvent) {
                    handleMapClick(mouseEvent);
                });
                
                // ì§€ë„ ë¡œë“œ ì™„ë£Œ ì´ë²¤íŠ¸
                kakao.maps.event.addListener(map, 'tilesloaded', function() {
                    console.log('ì§€ë„ íƒ€ì¼ ë¡œë“œ ì™„ë£Œ');
                });
                
            } catch (error) {
                console.error('ì§€ë„ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ì¬ì‹œë„
                setTimeout(initializeMap, 1000);
            }
        }
        
        // ì§€ë„ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
        function handleMapClick(mouseEvent) {
            if (!map) return;
            
            try {
                // í´ë¦­í•œ ìœ„ì¹˜ì˜ ì¢Œí‘œ
                const latlng = mouseEvent.latLng;
                const coordinate = [latlng.getLng(), latlng.getLat()];
                
                // í´ë¦­í•œ ìœ„ì¹˜ì— ë§ˆì»¤ í‘œì‹œ
                showMarkerAtLocation(coordinate, 'í´ë¦­í•œ ìœ„ì¹˜');
            } catch (error) {
                console.log('ì§€ë„ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì˜¤ë¥˜:', error);
            }
        }
        
        // ìœ„ì¹˜ì— ë§ˆì»¤ í‘œì‹œ
        function showMarkerAtLocation(coordinate, locationName) {
            if (!map) return;
            
            try {
                // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
                if (tempMarker) {
                    tempMarker.setMap(null);
                }
                
                // ìƒˆ ë§ˆì»¤ ìƒì„± (ì¹´ì¹´ì˜¤ë§µ API ì‚¬ìš©)
                tempMarker = new kakao.maps.Marker({
                    position: new kakao.maps.LatLng(coordinate[1], coordinate[0])
                });
                
                // ë§ˆì»¤ë¥¼ ì§€ë„ì— ì¶”ê°€
                tempMarker.setMap(map);
                
                // ë§ˆì»¤ í´ë¦­ ì‹œ ì •ë³´ì°½ í‘œì‹œ
                const infowindow = new kakao.maps.InfoWindow({
                    content: `<div style="padding:10px;text-align:center;"><strong>${locationName}</strong></div>`
                });
                
                kakao.maps.event.addListener(tempMarker, 'click', function() {
                    infowindow.open(map, tempMarker);
                });
                
                console.log('ë§ˆì»¤ ì¶”ê°€ ì™„ë£Œ:', locationName);
            } catch (error) {
                console.error('ë§ˆì»¤ ìƒì„± ì˜¤ë¥˜:', error);
            }
        }
        
        // ëœë¤ ì—¬í–‰ì§€ ì„ íƒ
        function pickRandomLocation() {
            if (!map) {
                alert('ì§€ë„ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            try {
                // í•œêµ­ ì§€ì—­ ì¢Œí‘œ (ìœ„ë„, ê²½ë„ ìˆœì„œ)
                const koreaLocations = [
                    { name: 'ì„œìš¸', coordinate: [127.0, 37.5] },
                    { name: 'ë¶€ì‚°', coordinate: [129.0, 35.1] },
                    { name: 'ëŒ€êµ¬', coordinate: [128.6, 35.9] },
                    { name: 'ì¸ì²œ', coordinate: [126.7, 37.5] },
                    { name: 'ê´‘ì£¼', coordinate: [126.9, 35.2] },
                    { name: 'ëŒ€ì „', coordinate: [127.4, 36.3] },
                    { name: 'ìš¸ì‚°', coordinate: [129.3, 35.5] },
                    { name: 'ì„¸ì¢…', coordinate: [127.3, 36.5] },
                    { name: 'ì œì£¼', coordinate: [126.5, 33.4] }
                ];
                
                // ëœë¤í•˜ê²Œ ìœ„ì¹˜ ì„ íƒ
                const randomLocation = koreaLocations[Math.floor(Math.random() * koreaLocations.length)];
                
                // ì§€ë„ë¥¼ í•´ë‹¹ ìœ„ì¹˜ë¡œ ì´ë™ (ì¹´ì¹´ì˜¤ë§µ API ì‚¬ìš©)
                map.setCenter(new kakao.maps.LatLng(randomLocation.coordinate[1], randomLocation.coordinate[0]));
                map.setLevel(8); // ì ë‹¹í•œ ì¤Œ ë ˆë²¨
                
                // ë§ˆì»¤ í‘œì‹œ
                showMarkerAtLocation(randomLocation.coordinate, randomLocation.name);
                
                // ê²°ê³¼ í‘œì‹œ
                showResult(randomLocation.name);
            } catch (error) {
                console.error('ëœë¤ ì—¬í–‰ì§€ ì„ íƒ ì˜¤ë¥˜:', error);
                alert('ì—¬í–‰ì§€ ì„ íƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // ê²°ê³¼ í‘œì‹œ
        function showResult(locationName) {
            document.getElementById('locationName').textContent = locationName;
            document.getElementById('locationDescription').textContent = `${locationName}ì—ì„œ ë©‹ì§„ ì—¬í–‰ì„ ì¦ê²¨ë³´ì„¸ìš”!`;
            document.getElementById('resultCard').classList.remove('hidden');
            document.getElementById('favoriteBtn').classList.remove('hidden');
        }
        
        // ì¦ê²¨ì°¾ê¸° ì¶”ê°€
        function addToFavorites() {
            const locationName = document.getElementById('locationName').textContent;
            if (!locationName) return;
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            let favorites = JSON.parse(localStorage.getItem('travelFavorites') || '[]');
            const favorite = {
                name: locationName,
                timestamp: new Date().toISOString(),
                id: Date.now()
            };
            
            // ì¤‘ë³µ ì²´í¬
            const isDuplicate = favorites.some(fav => fav.name === locationName);
            if (isDuplicate) {
                alert('ì´ë¯¸ ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ëœ ì—¬í–‰ì§€ì…ë‹ˆë‹¤!');
                return;
            }
            
            favorites.push(favorite);
            localStorage.setItem('travelFavorites', JSON.stringify(favorites));
            
            alert(`${locationName}ì´(ê°€) ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`);
            loadFavorites();
        }
        
        // ì¦ê²¨ì°¾ê¸° ë¡œë“œ
        function loadFavorites() {
            const favorites = JSON.parse(localStorage.getItem('travelFavorites') || '[]');
            const container = document.getElementById('favoritesContainer');
            
            if (favorites.length === 0) {
                container.innerHTML = '<p>ì•„ì§ ì¦ê²¨ì°¾ê¸°í•œ ì—¬í–‰ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            container.innerHTML = favorites.map(fav => `
                <div class="favorite-item">
                    <h5>${fav.name}</h5>
                    <p>ì¶”ê°€ëœ ë‚ ì§œ: ${new Date(fav.timestamp).toLocaleDateString('ko-KR')}</p>
                    <button onclick="removeFavorite(${fav.id})" class="remove-btn">ì‚­ì œ</button>
                </div>
            `).join('');
        }
        
        // ì¦ê²¨ì°¾ê¸° ì‚­ì œ
        function removeFavorite(id) {
            let favorites = JSON.parse(localStorage.getItem('travelFavorites') || '[]');
            favorites = favorites.filter(fav => fav.id !== id);
            localStorage.setItem('travelFavorites', JSON.stringify(favorites));
            loadFavorites();
        }
        
        // ì €ì¥í•˜ê¸°
        function saveLocation() {
            const locationName = document.getElementById('locationName').textContent;
            if (!locationName) return;
            
            // ì €ì¥ëœ ì •ë³´ í‘œì‹œ
            document.getElementById('savedInfo').classList.remove('hidden');
            
            // ê²½ë¡œ ì •ë³´ í‘œì‹œ
            const routeDetails = document.getElementById('routeDetails');
            if (routeMap1 || routeMap2) {
                routeDetails.innerHTML = `
                    <p>âœ… ê²½ë¡œê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                    <p>RouteMap1: ${routeMap1 ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}</p>
                    <p>RouteMap2: ${routeMap2 ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}</p>
                `;
            } else {
                routeDetails.innerHTML = '<p>ì•„ì§ ê²½ë¡œê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>';
            }
            
            // ì¦ê²¨ì°¾ê¸° ë¡œë“œ
            loadFavorites();
            
            alert('ìœ„ì¹˜ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        // ë‹¤ì‹œí•˜ê¸°
        function reset() {
            // ë§ˆì»¤ ì œê±° (ì¹´ì¹´ì˜¤ë§µ API ì‚¬ìš©)
            if (tempMarker && map) {
                tempMarker.setMap(null);
                tempMarker = null;
            }
            
            // ê²°ê³¼ ìˆ¨ê¸°ê¸°
            document.getElementById('resultCard').classList.add('hidden');
            document.getElementById('favoriteBtn').classList.add('hidden');
            
            // ì§€ë„ ì›ë˜ ìœ„ì¹˜ë¡œ (ì¹´ì¹´ì˜¤ë§µ API ì‚¬ìš©)
            map.setCenter(new kakao.maps.LatLng(36.5, 127.5)); // í•œêµ­ ì¤‘ì‹¬
            map.setLevel(7);
        }
        
        // ê²½ë¡œ ê·¸ë¦¬ê¸° ê´€ë ¨ í•¨ìˆ˜ë“¤ (ì¹´ì¹´ì˜¤ë§µ APIë¡œ êµ¬í˜„)
        function jsCreatRoute(mapName) {
            if (!map) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ ê²½ë¡œ ìƒì„±
            console.log(`${mapName} ê²½ë¡œ ìƒì„± ì¤€ë¹„`);
            
            if (mapName == 'test1') {
                routeMap1 = {
                    name: mapName,
                    polyline: null,
                    points: []
                };
            } else {
                routeMap2 = {
                    name: mapName,
                    polyline: null,
                    points: []
                };
            }
        }
        
        function jsAddRouteEvent(mapName) {
            if (!map) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ ê²½ë¡œ ì´ë²¤íŠ¸ ì¶”ê°€
            console.log(`${mapName} ê²½ë¡œ ì´ë²¤íŠ¸ ì¶”ê°€`);
            
            // ì§€ë„ í´ë¦­ ì‹œ ê²½ë¡œì— ì  ì¶”ê°€
            if (mapName == 'test1' && routeMap1) {
                routeMap1.isActive = true;
            } else if (mapName == 'test2' && routeMap2) {
                routeMap2.isActive = true;
            }
        }
        
        function mClick1(event) {
            if (!routeMap1 || !routeMap1.isActive) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
            console.log('test1 í´ë¦­ ì´ë²¤íŠ¸');
            
            // í´ë¦­í•œ ìœ„ì¹˜ë¥¼ ê²½ë¡œì— ì¶”ê°€
            const latlng = event.latLng;
            routeMap1.points.push(latlng);
            
            // ê²½ë¡œ ê·¸ë¦¬ê¸°
            drawRoute('test1');
        }
        
        function mClick2(event) {
            if (!routeMap2 || !routeMap2.isActive) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
            console.log('test2 í´ë¦­ ì´ë²¤íŠ¸');
            
            // í´ë¦­í•œ ìœ„ì¹˜ë¥¼ ê²½ë¡œì— ì¶”ê°€
            const latlng = event.latLng;
            routeMap2.points.push(latlng);
            
            // ê²½ë¡œ ê·¸ë¦¬ê¸°
            drawRoute('test2');
        }
        
        // ê²½ë¡œ ê·¸ë¦¬ê¸° í•¨ìˆ˜
        function drawRoute(mapName) {
            let routeData;
            if (mapName == 'test1') {
                routeData = routeMap1;
            } else {
                routeData = routeMap2;
            }
            
            if (!routeData || routeData.points.length < 2) return;
            
            // ê¸°ì¡´ ê²½ë¡œ ì œê±°
            if (routeData.polyline) {
                routeData.polyline.setMap(null);
            }
            
            // ìƒˆ ê²½ë¡œ ìƒì„±
            routeData.polyline = new kakao.maps.Polyline({
                path: routeData.points,
                strokeWeight: 3,
                strokeColor: '#FF0000',
                strokeOpacity: 0.7,
                strokeStyle: 'solid'
            });
            
            routeData.polyline.setMap(map);
        }
        
        function jsInit(mapName) {
            if (!map) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ ê²½ë¡œ ì´ˆê¸°í™”
            console.log(`${mapName} ê²½ë¡œ ì´ˆê¸°í™”`);
            
            if (mapName == 'test1' && routeMap1) {
                routeMap1.isActive = false;
            } else if (mapName == 'test2' && routeMap2) {
                routeMap2.isActive = false;
            }
        }
        
        function setColor(mapName) {
            if (!map) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ ìƒ‰ìƒ ì„¤ì •
            console.log(`${mapName} ìƒ‰ìƒ ë³€ê²½`);
            
            let routeData;
            if (mapName == 'test1') {
                routeData = routeMap1;
            } else {
                routeData = routeMap2;
            }
            
            if (routeData && routeData.polyline) {
                routeData.polyline.setOptions({
                    strokeColor: '#990033'
                });
            }
        }
        
        function setWidth(mapName) {
            if (!map) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ ë„ˆë¹„ ì„¤ì •
            console.log(`${mapName} ë„ˆë¹„ ë³€ê²½`);
            
            let routeData;
            if (mapName == 'test1') {
                routeData = routeMap1;
            } else {
                routeData = routeMap2;
            }
            
            if (routeData && routeData.polyline) {
                routeData.polyline.setOptions({
                    strokeWeight: 20
                });
            }
        }
        
        function jsRemoveRoute(mapName) {
            if (!map) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ ê²½ë¡œ ì œê±°
            console.log(`${mapName} ê²½ë¡œ ì œê±°`);
            
            if (mapName == 'test1' && routeMap1) {
                if (routeMap1.polyline) {
                    routeMap1.polyline.setMap(null);
                }
                routeMap1 = null;
            } else if (mapName == 'test2' && routeMap2) {
                if (routeMap2.polyline) {
                    routeMap2.polyline.setMap(null);
                }
                routeMap2 = null;
            }
        }
        
        function closeAllPop(mapName) {
            if (!map) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ íŒì—… ë‹«ê¸°
            console.log(`${mapName} íŒì—… ë‹«ê¸°`);
            
            // ëª¨ë“  ì •ë³´ì°½ ë‹«ê¸°
            const infowindows = document.querySelectorAll('.kakao-map-info-window');
            infowindows.forEach(window => window.style.display = 'none');
        }
        
        function openAllPop(mapName) {
            if (!map) return;
            
            // ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ì‚¬ìš©í•œ íŒì—… ì—´ê¸°
            console.log(`${mapName} íŒì—… ì—´ê¸°`);
            
            // ëª¨ë“  ì •ë³´ì°½ ì—´ê¸°
            const infowindows = document.querySelectorAll('.kakao-map-info-window');
            infowindows.forEach(window => window.style.display = 'block');
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('randomPickBtn').addEventListener('click', pickRandomLocation);
            document.getElementById('resetBtn').addEventListener('click', reset);
            document.getElementById('favoriteBtn').addEventListener('click', addToFavorites);
            document.getElementById('saveBtn').addEventListener('click', saveLocation);
        });
    </script>
</body>

</html>